---
title: Шаблонизация в {{ sw-full-name }}
description: Шаблонизация в {{ sw-name }} — динамическая генерация значения полей спецификации YaWL.
keywords:
  - workflows
  - workflow
  - воркфлоу
  - рабочий процесс
  - спецификация YaWL
  - шаблонизация
  - шаблонизатор
  - шаблон
  - темплейт
---


# Шаблонизация

Для полей [спецификации YaWL](./yawl.md), которые поддерживают шаблонизацию, значения могут генерироваться динамически с использованием данных, полученных из состояния рабочего процесса. Язык шаблонизации — `jq`. Подробнее см. [документацию jq](https://jqlang.github.io/jq/manual/).

По умолчанию шаблонизация не применяется для строковых значений полей — используйте [интерполяцию строк](https://jqlang.github.io/jq/manual/#string-interpolation).

## Входные данные для шаблонизатора {#input-data}

Входные данные для шаблонизатора различаются в зависимости от поля.

Поле | Входные данные
--- | ---
`input` | Полное [состояние рабочего процесса](workflow.md#state)
`output` | Выходные данные шага
Другие поля, которые поддерживают шаблонизацию | JSON-объект, отфильтрованный с помощью `input`

### Примеры использования шаблонизатора {#templator-examples}

Значение поля | Интерпретация шаблонизатора
--- | ---
`this is just a string` | Строка без применения шаблонизации
`this is a value from workflow state \(.data[1].some_property)` | `this is a value from workflow state <данные_из_состояния_рабочего_процесса>`
`\({x: 1, y: .a.b.c})` | `{“x”: 1, “y”: “<данные_из_состояния_рабочего_процесса>”}`

## Расширения шаблонизатора {#extensions}

Расширения шаблонизатора позволяют вызывать jq-функции, реализующие нестандартную логику.

### {{ lockbox-full-name }} {#lockbox-extension}

Специальная jq-функция `lockboxPayload` позволяет получать значение [секрета {{ lockbox-name }}](../../../lockbox/concepts/secret.md) по его идентификатору, ключу и (опционально) [версии](../../../lockbox/concepts/secret.md#version). Чтобы расширение работало корректно, в настройках [рабочего процесса](./workflow.md) должен быть указан [сервисный аккаунт](../../../iam/concepts/users/service-accounts.md), у которого есть права на просмотр содержимого секретов (например, с назначенной [ролью](../../../lockbox/security/index.md#lockbox-payloadViewer) `lockbox.payloadViewer`).

Описание аргументов jq-функции `lockboxPayload`:

Очередность аргумента | Тип | Обязательное | Описание
--- | --- | --- | ---
1 | `string` | Да | Идентификатор секрета.
2 | `string` | Да | Ключ секрета.
3 | `string` | Нет | Идентификатор версии секрета.

#### Примеры использования jq-функции `lockboxPayload` {#lockbox-examples}

* Получение последней версии секрета:

    ```text
    \(lockboxPayload("<идентификатор_секрета>"; "<ключ_секрета>"))
    ```
* Получение указанной версии секрета:

    ```text
    \(lockboxPayload("<идентификатор_секрета>"; "<ключ_секрета>"; "<идентификатор_версии_секрета>"))
    ```