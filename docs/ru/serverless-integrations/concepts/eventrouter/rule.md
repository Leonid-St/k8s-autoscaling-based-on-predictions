---
title: Правило {{ er-full-name }}
description: Правило {{ er-name }} — компонент маршрутизации, состоящий из фильтра и приемников.
keywords:
  - eventrouter
  - event router
  - шина
  - таргет
  - выход
  - правило
  - фильтр
  - приемник
---

# Правило

_Правило_ — компонент маршрутизации, состоящий из фильтра и 1-5 [приемников](#target). К [шине](bus.md) могут быть привязаны несколько правил. Каждое событие, поступившее в шину, проходит через все правила шины. Прежде чем срабатывает правило, проверяется, соответствует ли событие условиям, заданным в [фильтре](#filter). Если соответствует, правило срабатывает, и событие отправляется всем приемникам, указанным в правиле.

## Фильтр {#filter}

_Фильтр_ — выражение в [формате jq](https://jqlang.github.io/jq/manual/), которое применяется к каждому событию в шине. Фильтр возвращает булевый ответ и определяет, нужно ли отправлять событие указанным в правиле приемникам (например, `.firstName == "Ivan"`). Если фильтр пустой, правило считается сработавшим и события отправляются всем приемникам. Если не получается распарсить событие или тело события не удовлетворяет условиям, заданным в фильтре, правило не срабатывает.

## Приемник {#target}

_Приемник_ — это получатель события. Поддерживаемые приемники:

* [WebSocket-соединения](../../../api-gateway/concepts/extensions/websocket.md), подключенные к API-шлюзу {{ api-gw-name }};
* [функции](../../../functions/concepts/function.md) {{ sf-name }};
* [лог-группы](../../../logging/concepts/log-group.md) {{ cloud-logging-name }};
* [потоки данных](../../../data-streams/concepts/glossary.md#stream-concepts) {{ yds-name }};
* [очереди](../../../message-queue/concepts/queue.md) {{ message-queue-name }};
* [контейнеры](../../../serverless-containers/concepts/container.md) {{ serverless-containers-name }};
* [рабочие процессы](../../concepts/workflows/workflow.md) {{ sw-name }}.

{{ er-name }} поддерживает гарантию доставки `At least once`. Если временно невозможно доставить или получить подтверждение о доставке, {{ er-name }} будет повторно пытаться отправить событие до истечения времени жизни события. Количество повторных попыток и максимальное время жизни события задаются в настройках приемника. Событие, которое не удалось обработать, перемещается в указанную клиентом очередь Dead Letter Queue.

В целях оптимизации {{ er-name }} позволяет задать настройки группирования событий для некоторых типов приемников. В приемнике может быть задан jq-шаблон, в соответствии с которым события преобразовываются перед отправкой в приемник.
