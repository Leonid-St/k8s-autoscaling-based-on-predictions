В качестве метода уведомления вы можете указать функцию {{ sf-name }}. Эта функция будет вызвана при срабатывании эскалации.

Чтобы настроить уведомления с использованием {{ sf-name }}:

1. [Создайте функцию](../../functions/operations/function/function-create.md) и [версию функции](../../functions/operations/function/version-manage.md) в том же каталоге, где находится эскалация.
1. Включите в настройках функции [возможность асинхронного вызова](../../functions/operations/function/function-invoke-async.md).
1. [Создайте сервисный аккаунт](../../iam/operations/sa/create.md) с ролями `{{ roles-functions-invoker }}` и `{{ roles-functions-viewer }}`, он потребуется для вызова функции.
1. Создайте эскалацию и выберите метод уведомлений **{{ sf-name }}**.
1. В списке **Облачная функция** выберите созданную ранее функцию.
1. В списке **Сервисный аккаунт** выберите аккаунт для вызова функции.

#### Формат сообщения при вызове функции {{ sf-name }}

При вызове функции {{ sf-name }} в нее передается сообщение в формате JSON:

```json
{
    "alertId": "",
    "alertName": "",
    "folderId": "",
    "cloudId": "",
    "status": "",
    "annotations": {
        "key1": "value1",
        "key2": "value2"
    }
}
```

* `alertId` — идентификатор сработавшего алерта, текст;
* `alertName` — имя сработавшего алерта, текст;
* `folderId` — идентификатор каталога, в котором сработал алерт, текст;
* `cloudId` — идентификатор облака, в котором сработал алерт, текст;
* `status` — [статус алерта](../../monitoring/concepts/alerting/alert.md#alert-statuses), текст;
* `annotations` — значения аннотаций сработавшего алерта, словарь значений `key:value`.
