#### Что такое хост базы данных и кластер базы данных? {#what-is-cluster}

_Хост БД_ — это изолированная среда базы данных в облачной инфраструктуре с выделенными вычислительными ресурсами и зарезервированным объемом хранилища данных.

_Кластер БД_ — это один или более хостов БД, между которыми можно настроить репликацию.

#### Сколько хостов БД может содержать кластер? {#how-many-hosts}

Кластер {{ mgp-short-name }} состоит минимум из 4 хостов:

* 2 хоста-мастера;
* 2 хоста-сегмента.

Количество хостов-сегментов можно увеличить до 32.

Подробнее см. в разделе [Квоты и лимиты](../../managed-greenplum/concepts/limits.md).

#### Сколько кластеров можно создать в одном облаке? {#db-limit}

Технические и организационные ограничения MDB приведены в разделе [Квоты и лимиты](../../managed-greenplum/concepts/limits.md).

#### Как происходит обслуживание кластеров БД? {#service-window}

Под обслуживанием в {{ mgp-short-name }} понимается:

* автоматическая установка обновлений и исправлений СУБД для ваших хостов БД;
* изменение класса хостов и объема хранилища;
* другие сервисные работы {{ mgp-short-name }}.

Подробнее см. в разделе [Техническое обслуживание](../../managed-greenplum/concepts/maintenance.md).


#### Как рассчитывается стоимость использования для хоста базы данных? {#db-cost}

В {{ mgp-short-name }} стоимость использования рассчитывается исходя из следующих параметров:

* Выбранный класс хостов.
* Объем хранилища, зарезервированного для хоста БД.
* Объем резервных копий кластера БД. Объем резервных копий, равный объему хранилища, не тарифицируется. Хранение резервных копий сверх этого объема оплачивается по [тарифам](../../managed-greenplum/pricing/index.md).
* Количество часов работы хоста БД. Неполные часы округляются до целого значения. Стоимость часа работы для каждого класса хостов приведена в разделе [Правила тарификации](../../managed-greenplum/pricing/index.md).


#### Почему кластер работает медленно, хотя вычислительные ресурсы использованы не до предела? {#throttling}

{% include [throttling](../throttling.md) %}

Чтобы увеличить максимальные значения IOPS и bandwidth и снизить вероятность троттлинга, расширьте размер хранилища при [изменении кластера](../../managed-greenplum/operations/update.md#change-disk-size).

Если вы используете хранилище с типом диска `network-hdd`, рассмотрите возможность перехода на `network-ssd` или `network-ssd-nonreplicated` путем [восстановления кластера](../../managed-greenplum/operations/cluster-backups.md#restore) из резервной копии.

#### Почему возникает ошибка о минимальном объеме памяти для процессов {{ GP }}? {#memory-limit}

При создании, изменении или восстановлении кластера может появиться ошибка:

```text
Per process memory must be more then '20971520' bytes on segment host, got '<рассчитанный_объем_памяти>'
```

Ошибка возникает, если объем памяти на каждый процесс {{ GP }} составляет меньше установленного ограничения в 20 МБ. Максимальный объем памяти на каждый процесс кластера рассчитывается по формуле:

```text
<объем_RAM_хоста-сегмента> ÷ (<Max_connections> × <количество_сегментов_на_хост>)
```

Где `Max_connections` — [настройка СУБД](../../managed-greenplum/concepts/settings-list.md#setting-max-connections) {{ GP }}.

Чтобы устранить ошибку, воспользуйтесь одним из способов:

* Уменьшите значение `max_connections`.
* Увеличьте объем памяти, изменив [класс хостов-сегментов](../../managed-greenplum/concepts/instance-types.md).
